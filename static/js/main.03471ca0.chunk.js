(this["webpackJsonpi-like-trains"]=this["webpackJsonpi-like-trains"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/github.3bd240d1.svg"},21:function(e,t,a){e.exports=a.p+"static/media/react.5d5d9eef.svg"},22:function(e,t,a){e.exports=a.p+"static/media/travis.4f9df7d6.svg"},23:function(e,t,a){e.exports=a.p+"static/media/mbta.c5e2949f.svg"},24:function(e,t,a){e.exports=a(54)},29:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),i=(a(29),a(2)),l=a(3),c=a(7),u=a(5),d=a(4),p=a(19),m=a.n(p),h=(a(31),a(32),a(33),a(8)),f=a.n(h),v=a(6),E=a.n(v),b="https://api-v3.mbta.com";function _(e){return f.a.get("".concat(b,"/stops"),{params:{"filter[route]":e}}).then((function(e){return e.data.data}))}function g(e,t){var a=new Date;return f.a.get("".concat(b,"/schedules"),{params:{"filter[stop]":e,sort:"departure_time","page[limit]":"10","filter[date]":E()(a).format("YYYY-MM-DD"),"filter[min_time]":E()(a).format("HH:mm"),"filter[route]":t.map((function(e){return e.id})).join(","),include:"stop,trip,prediction,route"}}).then((function(e){return e.data.data}))}var S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={stops:[],selected_stop_idx:0,selected_stop:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;_(this.props.route_id).then((function(t){e.setState({stops:t}),e.props.handleStopSelect(t.length>0?t[0]:{})}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;e.route_id!==this.props.route_id&&_(this.props.route_id).then((function(e){n.setState({stops:e}),n.props.handleStopSelect(e.length>0?e[0]:{})}))}},{key:"handleStopSelect",value:function(e){this.setState({selected_stop_idx:e}),this.props.handleStopSelect(this.state.stops[e])}},{key:"render",value:function(){var e=this,t=this.state.stops.map((function(t,a){return r.a.createElement("div",{className:"stop",key:"stop-".concat(a)},r.a.createElement("div",{className:e.state.selected_stop_idx===a?"stop-content selected":"stop-content",onClick:function(){return e.handleStopSelect(a)}},r.a.createElement("div",{className:"stop-pip"}),r.a.createElement("span",{className:"stop-label"},t.attributes.name)),a+1!==e.state.stops.length?r.a.createElement("div",{className:"stop-connector"}):r.a.createElement("div",null))}));return r.a.createElement("div",{id:"stop"},t)}}]),a}(r.a.Component),y=(a(52),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),k=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={departures:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;g(this.props.stop.id,this.props.routes).then((function(t){return e.setState({departures:t})}))}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;e.stop.id!==this.props.stop.id&&g(this.props.stop.id,this.props.routes).then((function(e){return n.setState({departures:e})}))}},{key:"render",value:function(){var e=this;console.log(this.state.departures);var t=this.state.departures.map((function(t,a){if(!t.attributes.departure_time)return null;var n=e.props.routes.find((function(e){return e.id===t.relationships.route.data.id}));return r.a.createElement("tr",{className:"schedule-row",key:"departure-".concat(a)},r.a.createElement("td",null,"MBTA"),r.a.createElement("td",null,E()(t.attributes.departure_time).format("HH:mm")),r.a.createElement("td",null,n.attributes.direction_destinations[t.attributes.direction_id]),r.a.createElement("td",null,"---"),r.a.createElement("td",null,"TBD"),r.a.createElement("td",null,"ON TIME"))}));return r.a.createElement("div",{id:"schedule"},r.a.createElement("div",{class:"schedule-header"},r.a.createElement("div",null,r.a.createElement("h2",null,y[(new Date).getDay()]),r.a.createElement("p",null,E()(new Date).format("MM-DD-YYYY"))),r.a.createElement("h1",null,this.props.stop.attributes.name," Information"),r.a.createElement("div",null,r.a.createElement("h2",null,"CURRENT TIME"),r.a.createElement("p",{className:"time-display"},E()(new Date).format("HH:mm")))),r.a.createElement("table",null,r.a.createElement("tr",{className:"schedule-row"},r.a.createElement("th",null,"CARRIER"),r.a.createElement("th",{className:"time"},"TIME"),r.a.createElement("th",null,"DESTINATION"),r.a.createElement("th",null,"TRAIN#"),r.a.createElement("th",null,"TRACK#"),r.a.createElement("th",null,"STATUS")),t))}}]),a}(r.a.Component),j=(a(53),a(20)),O=a.n(j),w=a(21),D=a.n(w),N=a(22),T=a.n(N),x=a(23),M=a.n(x),R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"logo-bar"},r.a.createElement("a",{href:"https://github.com/GunnarHorve/i-like-trains"},r.a.createElement("img",{src:O.a,alt:"github source"})),r.a.createElement("a",{href:"https://travis-ci.com/github/GunnarHorve/i-like-trains"},r.a.createElement("img",{src:T.a,alt:"build server"})),r.a.createElement("a",{href:"https://reactjs.org/docs/create-a-new-react-app.html"},r.a.createElement("img",{src:D.a,alt:"create react app"})),r.a.createElement("a",{href:"https://www.mbta.com/developers/v3-api"},r.a.createElement("img",{src:M.a,alt:"mbta v3 api"})))}}]),a}(r.a.Component),C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={routes:[],selected_route:"",selected_route_idx:0,selected_stop:""},n._handleRouteSelect=n.handleRouteSelect.bind(Object(c.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.get("".concat(b,"/routes"),{params:{"filter[type]":"2"}}).then((function(e){return e.data.data})).then((function(t){return e.setState({routes:t,selected_route:t[0]})}))}},{key:"handleRouteSelect",value:function(e){this.setState({selected_route:e.value.route,selected_route_idx:e.value.idx})}},{key:"handleStopSelect",value:function(e){this.setState({selected_stop:e})}},{key:"render",value:function(){var e=this,t=this.state.routes.map((function(e,t){return{value:{route:e,idx:t},label:e.attributes.long_name}})),a=t.length>0?t[this.state.selected_route_idx].label:"loading";return r.a.createElement("div",{id:"app"},r.a.createElement("div",{id:"route-manager"},r.a.createElement(m.a,{options:t,onChange:this._handleRouteSelect,value:a}),""!==this.state.selected_route?r.a.createElement(S,{handleStopSelect:function(t){return e.handleStopSelect(t)},route_id:this.state.selected_route.id}):r.a.createElement("div",null)),r.a.createElement("div",{id:"schedule-manager"},""!==this.state.selected_stop?r.a.createElement(k,{stop:this.state.selected_stop,route:this.state.selected_route,routes:this.state.routes}):r.a.createElement("div",null)),r.a.createElement("div",null),r.a.createElement(R,null))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.03471ca0.chunk.js.map